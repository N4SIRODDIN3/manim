(self.webpackChunklite=self.webpackChunklite||[]).push([[66371],{66371:(e,t,n)=>{"use strict";n.d(t,{Cs:()=>Q,Dj:()=>J});var r=n(28655),o=n.n(r),i=n(71439),a=n(67294),s=n(28859),l=n(37801),c=n(12423),u=n(63038),d=n.n(u),m=n(46829),p=n(94093),f=n(64235),g=n(32589),E=n(82318),_=n(95760),h=n(51512),v=n(6688),x=n(27108);function y(){var e=o()(["\n  fragment DigestReferredPostBodyCreatorPromo_user on User {\n    id\n    name\n  }\n"]);return y=function(){return e},e}var b=(0,i.Ps)(y()),I=function(e){var t=e.creator,n=e.postId,r=a.useRef(null),o=(0,v.I)(),i=(0,g.Pd)(t),s=i.viewerEdge,l=i.loading,c=(0,m.useMutation)(f.L,{variables:{targetUserId:t.id}}),u=d()(c,1)[0],y=(0,m.useMutation)(f.g,{variables:{targetUserId:t.id}}),b=d()(y,1)[0],I=(0,_.Av)(),w="post_body_cta",P=a.useCallback((function(){return I.event("user.followed",{targetUserId:t.id,followSource:w}),u()}),[t.id,w,u]),C=a.useCallback((function(){return I.event("user.unfollowed",{targetUserId:t.id,followSource:w}),b()}),[t.id,w,b]),B=(0,h.pK)(),k=!1,T=function(){!k&&O()&&(I.event("post.digestReferredFollowCreatorPromoViewed",{postId:n,targetUserId:t.id,source:B}),k=!0)},O=function(){var e;if(!r.current)return!1;var t=null===(e=r.current)||void 0===e?void 0:e.getBoundingClientRect(),n=t.top+t.height/2;return n>=0&&n<=window.innerHeight};return a.useEffect((function(){return T(),window&&x.V6.on("scroll",T),function(){x.V6.off("scroll",T)}}),[]),l?null:a.createElement("div",{ref:r},a.createElement(p.I,{alpha:.02,verticalMargins:{normal:"42px",small:"28px"}},null!=s&&s.isFollowing?a.createElement(a.Fragment,null,"Youâ€™re now following ",t.name,"."," ",a.createElement(E.r,{onClick:C,inline:!0,linkStyle:"OBVIOUS"},"Unfollow")):a.createElement(a.Fragment,null,"You've read a few stories by this writer."," ",a.createElement("span",{className:o({fontWeight:"bold"})},a.createElement(E.r,{onClick:P,linkStyle:"OBVIOUS"},"Follow ",t.name))," ","to see more of their stories across Medium.")))},w=n(44470),P=n(48409),C=n(4743),B=n(47875),k=n(50493),T=n(86948),O=n(47713),M=n(60519),S=n(79356),R=n(50077),L=n(49925),N=n(53976),D=n(47552),U=n(14071),F=n(98281),A=n(82143),G=n(30027),V=n(42933),W=n(19464),H=n(27390);function Y(){var e=o()(["\n  fragment PostBodyInserts_post on Post {\n    collection {\n      ...auroraHooks_publisher\n    }\n    creator {\n      ...auroraHooks_publisher\n      ...DigestReferredPostBodyCreatorPromo_user\n      ...UserMentionTooltip_user\n      ...CardByline_publisher\n    }\n    isPublished\n    isShortform\n    # please note that postMeteringOptions is defined in PostHandler, which uses PostBodyInserts\n    content(postMeteringOptions: $postMeteringOptions) {\n      bodyModel {\n        paragraphs {\n          name\n          text\n          type\n        }\n      }\n    }\n    ...CardByline_post\n    ...PostByline_post\n    ...PostFooterSocialPopover_post\n    ...SharePostButtons_post\n    ...BookmarkButton_post\n    ...CreatorActionOverflowPopover_post\n    ...InResponseToEntityPreview_post\n    ...OverflowMenuButtonWithNegativeSignal_post\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return Y=function(){return e},e}var z=function(){return null};function X(e){var t=e.post,n=(0,v.I)(),r=(0,L.GT)(t.collection||t.creator),o={marginTop:"32px"},i={post:t,source:"post_actions_header"},c=(0,N.VB)({name:"enable_seamless_social_sharing",placeholder:!1}),u=null==t?void 0:t.creator;return a.createElement(s.TA,{className:n(o),name:"byline",type:"byline",offset:{left:-600}},a.createElement(V.x,{display:"flex",justifyContent:"space-between",xs:{marginTop:o.marginTop},sm:{flexDirection:"column-reverse",marginTop:o.marginTop}},r&&t.creator?a.createElement(R.u_,{avatar:a.createElement(F.Yt,{user:t.creator,scale:"XXS",link:!0,withHalo:!0}),publisher:t.creator,href:t.mediumUrl||void 0,isOneLine:!0,publishedAt:t.firstPublishedAt,showStar:!!t.isLocked,timeToRead:!t.isShortform&&t.readingTime?"".concat((0,H.Vd)(t.readingTime)," min read"):void 0,post:t}):a.createElement(B.G,{scale:"M",post:t,showBio:!1,hideCollection:!0}),a.createElement(V.x,{display:"flex",alignItems:"flex-end",print:{display:"none"},xs:{marginLeft:"0px",marginBottom:"30px"},sm:{marginLeft:"0px",marginBottom:"30px"},md:{marginLeft:"30px"},lg:{marginLeft:"30px"},xl:{marginLeft:"30px"}},a.createElement(V.x,{display:"flex",alignItems:"center"},t.isPublished&&(!r||!t.isShortform)&&a.createElement(a.Fragment,null,r&&!c?a.createElement(S.$,i):a.createElement(U.U,i),a.createElement(V.x,{margin:"0 6px 0 7px"},a.createElement(h.cW,{source:{name:"post_actions_header"}},a.createElement(O.o,{post:t,susiEntry:"bookmark_preview"}))),t&&u&&a.createElement(D.b,{name:"enable_negative_signal",placeholder:function(){return a.createElement(W.B,null,(function(e){var n=e.show;return a.createElement(M.Z,{creator:t.creator,post:t,collection:null==t?void 0:t.collection,showLoadingIndicator:n,isDismissDisabled:!0})}))}},(function(e){return e?a.createElement(V.x,null,a.createElement(l.t,{post:t})):a.createElement(V.x,{flexGrow:"1"},a.createElement(W.B,null,(function(e){var n=e.show;return a.createElement(M.Z,{creator:t.creator,post:t,collection:null==t?void 0:t.collection,showLoadingIndicator:n,isDismissDisabled:!0})})))})))))))}function Z(e,t){return"".concat(t,"_").concat(e[t]?e[t].length:0)}function j(e,t,n,r,o){e[t]||(e[t]=[]),e[t].push({order:n,component:r,insertType:o})}function $(e,t,n){return function(r){var o="number"==typeof n.titleIndex,i=n.subtitleIndex||n.titleIndex||0,s=t[i]&&t[i].name,l=!!e.inResponseToEntityType;if(s&&0===i&&!o){var c=a.createElement(V.x,null,a.createElement(X,{post:e,key:"insert_postBylineGroupComponent_".concat(Z(r,"first"))}),l&&a.createElement(w.h,{padding:"32px 0 0",post:e}));j(r,"first","before",a.createElement(G.P,{size:"inset",key:"insert_MaxWidth_PostBylineGroupComponent_".concat(Z(r,"first"))},c),"BYLINE")}else if(s&&(j(r,s,"after",a.createElement(X,{post:e,key:"insert_PostBylineGroupComponent_".concat(Z(r,s))}),"BYLINE"),l)){var u=a.createElement(w.h,{padding:"42px 0 0",post:e});j(r,"first","before",a.createElement(G.P,{size:"inset",key:"insert_MaxWidth_ResponseMixtapeComponent_".concat(Z(r,"first"))},u),"RESPONSE_MIXTAPE")}return r}}function K(e,t,n){return(0,k.tE)(e)?function(r){var o="number"==typeof n.titleIndex,i=Math.max(n.bannerImageIndex||n.subtitleIndex||n.titleIndex||0,n.subtitleIndex||n.titleIndex||0),s=t[i]&&t[i].name;if(s&&0===i&&!o){var l=a.createElement(k.o5,{post:e,mode:"INLINE",key:"insert_TOC_".concat(Z(r,"first"))});j(r,"first","before",a.createElement(G.P,{size:"inset",key:"insert_MaxWidth_TableOfContents_".concat(Z(r,"first"))},l),"TABLE_OF_CONTENTS")}else s&&j(r,s,"after",a.createElement(k.o5,{post:e,mode:"INLINE",key:"insert_TableOfContents_".concat(Z(r,s))}),"TABLE_OF_CONTENTS");return r}:function(e){return e}}function q(e,t,n){var r=(0,C.ZV)(t),o=r.index,i=r.ordering;return"number"==typeof o&&n?function(n){var r=t[o]&&t[o].name,s=a.createElement(I,{creator:e.creator,postId:e.id,key:"insert_DigestReferredPostBodyCreatorPromo_".concat(Z(n,r))}),l=a.createElement(D.b,{name:"enable_digest_referred_follow_cta",placeholder:z,key:"insert_WithClientFlag_DigestReferredPostBodyCreatorPromo_".concat(Z(n,r))},(function(e){return e?s:null}));return j(n,r,i,l,"DIGEST_REFERRED_CREATOR_PROMO"),n}:function(e){return e}}function J(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.shouldInsertCreatorPromo,r=void 0!==n&&n,o=e&&e.content&&e.content.bodyModel&&e.content.bodyModel.paragraphs||void 0;if(o){var i=(0,C.LI)(o);return[$(e,o,i),K(e,o,i),q(e,o,r)].reduce((function(e,t){return t(e)}),{})}}var Q=(0,i.Ps)(Y(),L.C5,b,R.yu,R.Gk,B.H,S.u,U.E,T.z,M.G,A.O,P.V,c.v)}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/66371.568d4f28.chunk.js.map